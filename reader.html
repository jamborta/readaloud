<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>ReadAloud - Reader</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body class="reader-body" data-theme="light" data-font-size="medium">
    <div class="reader-container">
        <header class="reader-header">
            <div class="header-left">
                <button id="toc-btn" class="icon-btn" title="Table of Contents">☰</button>
                <button id="back-btn" class="icon-btn" title="Back to Library">← Library</button>
            </div>
            <h1 id="book-title" class="book-title">Loading...</h1>
            <div class="header-controls">
                <button id="settings-btn" class="icon-btn" title="Voice Settings">⚙️</button>
                <button id="font-size-btn" class="icon-btn" title="Font Size">Aa</button>
                <button id="theme-btn" class="icon-btn" title="Theme">☀</button>
            </div>
        </header>

        <!-- Table of Contents Sidebar -->
        <div id="toc-sidebar" class="toc-sidebar">
            <div class="toc-header">
                <h2>Table of Contents</h2>
                <button id="toc-close" class="close-btn">×</button>
            </div>
            <div id="toc-content" class="toc-content">
                <p class="toc-loading">Loading chapters...</p>
            </div>
        </div>
        <div id="toc-overlay" class="toc-overlay"></div>

        <!-- EPUB.js Viewer -->
        <div id="viewer" class="epub-viewer">
            <div id="prev" class="arrow">‹</div>
            <div id="viewer-wrapper">
                <div id="area"></div>
            </div>
            <div id="next" class="arrow">›</div>
        </div>

        <!-- Page Controls -->
        <div class="page-nav">
            <div class="page-info-display">
                <span id="current-page">Loading...</span>
                <span class="divider">/</span>
                <span id="total-pages">--</span>
            </div>
        </div>

    </div>

    <!-- Voice Settings Modal -->
    <div id="settings-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Voice Settings</h2>
                <button id="close-settings" class="close-btn">×</button>
            </div>
            <div class="modal-body">
                <div class="setting-item">
                    <label for="voice-select">Voice:</label>
                    <select id="voice-select" class="voice-select">
                        <option>Loading voices...</option>
                    </select>
                </div>

                <div class="setting-item">
                    <label for="speed-select">Speed:</label>
                    <select id="speed-select" class="speed-select">
                        <option value="0.5">0.5x</option>
                        <option value="0.75">0.75x</option>
                        <option value="1" selected>1x</option>
                        <option value="1.25">1.25x</option>
                        <option value="1.5">1.5x</option>
                        <option value="1.75">1.75x</option>
                        <option value="2">2x</option>
                    </select>
                </div>

                <div class="setting-item">
                    <label for="pitch-select">Pitch:</label>
                    <select id="pitch-select" class="pitch-select">
                        <option value="-5">-5</option>
                        <option value="-3">-3</option>
                        <option value="-1">-1</option>
                        <option value="0" selected>0</option>
                        <option value="1">+1</option>
                        <option value="3">+3</option>
                        <option value="5">+5</option>
                    </select>
                </div>
            </div>
        </div>
    </div>

    <!-- Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/epubjs/dist/epub.min.js"></script>
    <script src="libs/pdf.min.js?v=1.0.0"></script>
    <script src="js/storage.js?v=1.0.0"></script>
    <script src="js/api.js?v=1.0.0"></script>
    <script src="js/auth.js?v=1.0.0"></script>
    <script src="js/reader.js?v=2.4.0"></script>
</body>
</html>
