<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>ReadAloud - Reader</title>
    <link rel="stylesheet" href="css/reader.css?v=3.0.0">
</head>
<body class="reader-body" data-theme="light" data-font-size="medium">

    <!-- Permanent Sidebar -->
    <div id="sidebar" class="sidebar">
        <div class="sidebar-header">
            <button id="back-btn" class="sidebar-btn" title="Back to Library">← Library</button>
        </div>
        <div class="panels">
            <button id="toc-toggle" class="panel-btn active">TABLE OF CONTENTS</button>
        </div>
        <div id="toc-content" class="toc-view">
            <p class="toc-loading">Loading...</p>
        </div>
    </div>

    <!-- Main Content Area -->
    <div id="main" class="main">
        <!-- Titlebar -->
        <div id="titlebar" class="titlebar">
            <div class="titlebar-center">
                <h1 id="book-title" class="title">Loading...</h1>
            </div>
            <div class="titlebar-controls">
                <button id="settings-btn" class="control-btn" title="Voice Settings">⚙</button>
                <button id="font-size-btn" class="control-btn" title="Font Size">A</button>
                <button id="theme-btn" class="control-btn" title="Theme">☀</button>
            </div>
        </div>

        <!-- Navigation Arrows -->
        <div id="prev" class="arrow prev-arrow">‹</div>
        <div id="next" class="arrow next-arrow">›</div>

        <!-- EPUB Viewer -->
        <div id="viewer" class="viewer">
            <div id="area"></div>
        </div>
    </div>

    <!-- Voice Settings Modal -->
    <div id="settings-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Voice Settings</h2>
                <button id="close-settings" class="close-btn">×</button>
            </div>
            <div class="modal-body">
                <div class="setting-item">
                    <label for="voice-select">Voice:</label>
                    <select id="voice-select" class="voice-select">
                        <option>Loading voices...</option>
                    </select>
                </div>

                <div class="setting-item">
                    <label for="speed-select">Speed:</label>
                    <select id="speed-select" class="speed-select">
                        <option value="0.5">0.5x</option>
                        <option value="0.75">0.75x</option>
                        <option value="1" selected>1x</option>
                        <option value="1.25">1.25x</option>
                        <option value="1.5">1.5x</option>
                        <option value="1.75">1.75x</option>
                        <option value="2">2x</option>
                    </select>
                </div>

                <div class="setting-item">
                    <label for="pitch-select">Pitch:</label>
                    <select id="pitch-select" class="pitch-select">
                        <option value="-5">-5</option>
                        <option value="-3">-3</option>
                        <option value="-1">-1</option>
                        <option value="0" selected>0</option>
                        <option value="1">+1</option>
                        <option value="3">+3</option>
                        <option value="5">+5</option>
                    </select>
                </div>
            </div>
        </div>
    </div>

    <!-- Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/epubjs/dist/epub.min.js"></script>
    <script src="libs/pdf.min.js?v=1.0.0"></script>
    <script src="js/storage.js?v=1.0.0"></script>
    <script src="js/api.js?v=1.0.0"></script>
    <script src="js/auth.js?v=1.0.0"></script>
    <script src="js/reader.js?v=3.0.0"></script>
</body>
</html>
